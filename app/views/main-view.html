<div class="row" ng-controller="dashboardController" ng-hide="!application">

    <div class="col-lg-12">

        <h4><span class="glyphicon  glyphicon-chevron-right"></span>&nbsp;Overview</h4>

        <p>Check the status of the campaigns here.</p>

        <div class="separator-10"></div>

        <div class="row">
            <div class="col-lg-7">

                <h4>Latest Campaigns</h4>

                <table class="table dashboard">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>CAMPAIGN NAME</th>
                            <th>PROGRESS</th>
                            <th>STATUS</th>
                            <th>ACTION</th>
                        </tr>
                    </thead>

                    <tbody ng-show="!campaigns.length">
                        <tr>
                            <td colspan="4" class="text-center">
                                <h5>There's no campaigns registered at the moment</h5>
                            </td>
                        </tr>
                    </tbody>

                    <tbody ng-repeat="campaign in campaigns">
                        <tr>
                            <td>{{ $index + 1 }}</td>
                            <td><a ng-href="#/campaigns/{{campaign.id}}">{{ campaign.name }}</a></td>
                            <td><progressbar class="progress-striped active" max="campaign.targets.length" value="campaign.feedbackNumber" type="success"><i>{{campaign.feedbackNumber}} / {{campaign.targets.length}}</i></progressbar></td>
                            <td class="text-left"><button type="button" class="btn btn-xs" ng-class="{'btn-warning': (campaign.status === 'WAITING_FOR_FEEDBACK'), 'btn-info': (campaign.status === 'STARTED'), 'btn-success': (campaign.status === 'CLOSED')}" class="btn btn-xs">{{ campaign.status }}</button></td>
                            <td class="text-left">
                                <div ng-hide="campaign.startDate!=null">
                                    <button type="button" class="btn btn-xs btn-success" ng-show="{{(campaign.status === 'CREATED')}}" ng-click="onCampaignStart(campaign.id)">
                                        <span>START</span>
                                    </button>
                                </div>
                                <button type="button" class="btn btn-xs btn-info" ng-show="{{(campaign.status === 'WAITING_FOR_FEEDBACK')}}" ng-click="onCampaignStopClose(campaign.id)">
                                    <span>STOP & CLOSE</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div ng-show="campaigns.length">
                    <a ng-href="#/campaigns" class="label label-primary">VIEW-ALL</a>
                </div>
            </div>

            <div class="col-lg-5 dashboard-chart-section">
                <div class="form-inline">
                    <div class="form-group">
                        <h4>Weekly Feedback</h4>
                    </div>
                    <div class="form-group pull-right weekly-chart">
                        <span ng-click="refresh()"><a href="#">refresh</a>&nbsp;&nbsp;<i class="fa fa-refresh"></i></span>
                    </div>
                </div>

                <div class="separator-20"/>

                <div class="weekly-chart-container">
                    <highchart class="weekly-chart" config="weeklyChart" series="data()"/>
                </div>

            </div>
        </div>

    </div>
</div>
